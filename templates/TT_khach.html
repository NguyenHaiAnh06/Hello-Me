<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Thông tin khách</title>
    <link rel="stylesheet" href="TT_khach.css" />
  </head>
  <body>
    <div class="box">
      <div class="buttons">
        <a href="#login">Đăng nhập</a>
        <a href="#register">Đăng ký</a>
      </div>
      <div id="login" class="form">
        <h2>Đăng nhập</h2>
          <form id="loginForm">
         <input type="text" id="login_username" name="username" placeholder="Email / SDT" required />
         <input type="password" id="login_password" name="password" placeholder="Mật khẩu" required />
      <button type="submit">Đăng nhập</button>
     </form>
        <a href="#forgot" class="forgot">Quên mật khẩu?</a>
      </div>
      <div id="register" class="form">
      <h2>Đăng ký</h2>
     <form id="registerForm">
     <input type="text" id="reg_username" name="username" placeholder="Email / SDT" required />
    <input type="password" id="reg_password" name="password" placeholder="Mật khẩu" required />
     <button type="submit">Đăng ký</button>
      </form>
     </div>
      <div id="forgot" class="form">
        <h2>Quên mật khẩu à bách ngu?</h2>
        <form>
          <input type="email" placeholder="Nhập email của bạn" />
          <button type="submit">Gửi yêu cầu</button>
        </form>

        <a href="#login" class="back">← Quay lại đăng nhập</a>
      </div>
    </div>
    <script>
document.getElementById("loginForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const username = document.getElementById("login_username").value;
    const password = document.getElementById("login_password").value;

    fetch("http://localhost:3000/login", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ username, password })
    })
    .then(res => res.json())
    .then(data => {
        alert(data.message);
        if(data.message === "Đăng nhập thành công") window.location.href = "home.html";
    })
    .catch(err => alert("Lỗi kết nối server"));
});
document.getElementById("registerForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const username = document.getElementById("reg_username").value;
    const password = document.getElementById("reg_password").value;
    fetch("http://localhost:3000/register", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ username, password })
    })
    .then(res => res.json())
    .then(data => alert(data.message));
});
</script>
  </body>
</html>
